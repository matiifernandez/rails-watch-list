<div class="container py-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <div class="d-flex align-items-center">
      <% if @list.photo.attached? %>
        <%= image_tag @list.photo, class: "avatar-bordered me-3", style: "width: 60px; height: 60px; object-fit: cover;" %>
      <% end %>
      <h1 class="m-0"><%= @list.name.upcase %></h1>
    </div>
    <div class="d-flex align-items-center">
      <%= link_to '<i class="fa-solid fa-trash-can"></i>'.html_safe,
        list_path(@list),
        data: { turbo_method: :delete, turbo_confirm: "Are you sure you want to delete this list?" },
        class: 'btn btn-danger me-3'
      %>
      <%= link_to "Back to all lists", lists_path, class: 'btn btn-light' %>
    </div>
  </div>

  <div class="row justify-content-center mt-4">
    <div class="col-12 col-md-8 col-lg-6">
      <div class="card">
        <div class="card-body">
          <h3 class="card-title">Add a new movie</h3>
          <%= simple_form_for [@list, @bookmark] do |f| %>
            <%= f.association :movie, collection: Movie.all %>
            <%= f.input :comment, placeholder: 'A must-watch for any sci-fi fan!' %>
            <%= f.submit 'Add Movie', class: 'btn btn-secondary w-100' %>
          <% end %>
        </div>
      </div>
    </div>
  </div>

  <hr class="my-5">

  <% if @list.bookmarks.any? %>
    <div class="row">
      <% @list.bookmarks.each do |bookmark| %>
        <div class="col-12 col-sm-4 col-md-4 col-lg-3 mb-4">
          <div class="card h-100">
            <%= image_tag bookmark.movie.poster_url, alt: bookmark.movie.title, class: 'card-img-top' %>
            <div class="card-body d-flex flex-column">
              <h5 class="card-title d-flex justify-content-between align-items-center">
                <%= bookmark.movie.title %>
                <small class="text-muted"><i class="fas fa-star text-warning"></i> <%= bookmark.movie.rating %></small>
              </h5>
              <p class="card-text text-muted"><%= bookmark.movie.overview %></p>
              <blockquote class="blockquote mt-auto mb-0">
                <p class="mb-0"><%= bookmark.comment %></p>
              </blockquote>
            </div>
            <div class="card-footer text-end">
              <%= link_to "<i class='fa-solid fa-trash'></i>".html_safe, bookmark_path(bookmark), data: { turbo_method: :delete, turbo_confirm: "Are you sure you want to remove this movie?" }, class: 'text-danger' %>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <div class="alert alert-info" role="alert">
      There are no movies in this list yet.
    </div>
  <% end %>
</div>
